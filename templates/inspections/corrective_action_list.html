{% extends "base.html" %}
{% block title %}Corrective Actions{% endblock %}

{% block content %}
<div class="container-fluid">

    <h1 class="mb-4">Corrective Actions</h1>

    <div class="card">
        <div class="card-header bg-light">
            Actions Assigned to Your Schools
        </div>

        <ul class="list-group list-group-flush">
            {% for action in actions %}
            <li class="list-group-item d-flex justify-content-between align-items-start">

                <div class="flex-grow-1">

                    <strong>{{ action.inspection_item.checklist_item.text }}</strong><br>
                    <small>
                        {{ action.inspection_item.inspection.school.name }}
                    </small><br>

                    <span class="badge
                        {% if action.status == 'OPEN' %} bg-danger
                        {% elif action.status == 'IN_PROGRESS' %} bg-warning text-dark
                        {% elif action.status == 'AWAITING_REINSPECTION' %} bg-info text-dark
                        {% elif action.status == 'REINSPECTED' %} bg-success
                        {% elif action.status == 'RESOLVED' %} bg-success
                        {% endif %}
                    ">
                        {{ action.get_status_display }}
                    </span>


                </div>

                <div class="text-end">
                    <a href="{% url 'inspections:corrective_action_detail' action.pk %}"
                       class="btn btn-sm btn-outline-primary">
                        View
                    </a>
                </div>

            </li>
            {% empty %}
                <li class="list-group-item text-center text-muted">
                    No corrective actions to display.
                </li>
            {% endfor %}
        </ul>
    </div>

</div>
{% endblock %}
